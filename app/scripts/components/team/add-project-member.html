<div class="modal-header">
    <h3 class="modal-title">{{ addTitle }} project member</h3>
</div>
<div class="modal-body">
    <div ng-if="loading">
        <h1 class="text-center"><i class="icon fa-spinner fa-spin"></i></h1>
    </div>
    <div ng-if="!loading" block-ui="add-team-member-dialog">
        <div class="form-group" ng-if="!editUser && users.length">
            <label class="control-label">User:</label>
            <user-selector users="users" model="projectModel"></user-selector>
        </div>

        <p ng-if="!editUser && !users.length" class="text-danger">
            There are no available users.
        </p>

        <div class="form-group" ng-if="editUser">
            <p class="form-control-static">
                <strong>User:</strong>
                {{ editUser.full_name || editUser.username }}
            </p>
        </div>

        <div class="form-group" ng-if="isProjectManager">
            <p class="form-control-static">
                <strong>Role</strong>: {{::possibleRoles[1].name}}
            </p>
        </div>

        <div class="form-group" ng-if="!isProjectManager">
            <div ng-repeat="role in possibleRoles">
                <label>
                    <input name="role"
                           type="radio"
                           ng-model="projectModel.role"
                           ng-value="role.value">
                    {{role.name}}
                </label>
            </div>
        </div>

        <div class="form-group">
            <div class="datepicker input-group">
                <input
                    type="text"
                    class="form-control"
                    uib-datepicker-popup="{{ datetime.format }}"
                    ng-model="projectModel.expiration_time"
                    is-open="dateTimeOpened"
                    datepicker-options="datetime.dateOptions"
                    close-text="Close"
                    ng-change="test()"
                    alt-input-formats="datetime.altInputFormats"/>
                <span class="input-group-btn">
                      <button
                              type="button"
                              class="btn btn-default"
                              ng-click="dateTimeOpened = !dateTimeOpened">
                        <i class="fa fa-calendar"></i>
                      </button>
                </span>
            </div>
        </div>

        <div class="error" ng-repeat="error in errors" ng-bind="error"></div>
    </div>
</div>
<div class="modal-footer">
    <button class="btn btn-primary"
            submit-button="saveUser()"
            ng-class="{'disabled': canSubmit()}">
        {{ addText }}
    </button>
    <button class="btn btn-default"
            ng-click="$dismiss()">
        Cancel
    </button>
</div>
