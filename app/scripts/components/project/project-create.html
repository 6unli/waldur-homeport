<div ng-if="$ctrl.loading">
  <loading-spinner/>
</div>
<div ng-if="!$ctrl.loading">
  <form class="form-horizontal" name="$ctrl.form" novalidate>
    <div class="form-group">
      <label for="projectName" class="col-sm-3 control-label">
        <span translate>Project name</span>
      </label>
      <div class="col-sm-5">
        <input type="text"
          id="projectName"
          name="name"
          ng-model="$ctrl.project.name"
          ng-blur="$ctrl.validate()"
          class="form-control"
          required/>
        <p class="help-block m-b-none text-muted" translate>
          This name will be visible in accounting data.
        </p>
        <div class="error" ng-repeat="error in $ctrl.errors.name" ng-bind="error"></div>
      </div>
    </div>

    <div class="form-group">
      <label for="projectDescription" class="col-sm-3 control-label">
        <span translate>Project description</span>
      </label>
      <div class="col-sm-5">
        <textarea id="projectDescription"
          class="form-control"
          ng-model="$ctrl.project.description">
        </textarea>
        <div class="error" ng-repeat="error in $ctrl.errors.description" ng-bind="error"></div>
      </div>
    </div>

    <div class="form-group">
      <label class="col-sm-3 control-label">
        <span translate>Certifications</span>
        <i class="fa fa-question-circle" uib-tooltip="{{ 'Provider certification required by this project' | translate }}"></i>
      </label>
      <div class="col-sm-5">
        <ui-select
          multiple
          ng-model="$ctrl.projectCertifications"
          ng-if="$ctrl.certifications">
          <ui-select-match placeholder="{{ 'Select certifications' | translate }}">
            {{ $item.name }}
          </ui-select-match>
          <ui-select-choices repeat="item in $ctrl.certifications | filter: {name: $select.search} track by item.url">
            <div ng-bind-html="item.name | highlight: $select.search"></div>
          </ui-select-choices>
        </ui-select>
        <div class="form-control-static"
          ng-if="!$ctrl.certifications" translate>
          N/A
        </div>
      </div>
    </div>

    <div class="form-group">
      <div class="col-sm-offset-3 col-sm-5 help-block ">
        <div class="error" ng-repeat="error in $ctrl.errors.nonFieldErrors" ng-bind="error"></div>
      </div>
    </div>

    <div class="form-group">
      <div class="col-sm-offset-3 col-sm-5">
        <button class="btn btn-primary" submit-button="$ctrl.save()">
          <span translate>Add project</span>
        </button>
        <button class="btn btn-default" ng-click="$ctrl.cancel()">
          <span translate>Cancel</span>
        </button>
      </div>
    </div>
  </form>
</div>
