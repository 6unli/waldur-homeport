<div class="table-responsive">
    <table class="table">
        <thead>
            <tr>
                <th translate>Permitted</th>
                <th translate>Project name</th>
                <th translate>RAM limit GB</th>
                <th translate>CPU limit</th>
                <th translate>Storage limit GB</th>
            </tr>
        </thead>
        <tbody>
            <tr ng-repeat="choice in $ctrl.choices" ng-form name="quotaForm">
                <td>
                    <input ng-model="choice.selected" type="checkbox"/>
                </td>
                <td>
                    <label>
                        {{ choice.title | translate }}
                        <helpicon class="pull-right" help-text="{{ choice.help_text }}" ng-if="choice.help_text"/>
                    </label>
                    <br/>
                    <small ng-bind="choice.subtitle" ng-if="choice.subtitle"></small>
                    <small ng-if="quotaForm.$invalid && choice.selected" translate>Minimum value is 1.</small>
                </td>
                <td ng-class="{'has-error': (quotaForm.ram.$error.min || quotaForm.ram.$error.required) && choice.selected }">
                    <input class="form-control" id="{{ 'quotas-ram-' + $index }}" type="number" name="ram"
                     ng-model="choice.quotas.ram.limit"
                     multiply-by="$ctrl.multiplyFactor"
                     ng-min="1"
                     ng-disabled="!choice.selected"
                     ng-required="choice.selected"
                     ng-change="choice.dirty = true">
                    <p>
                        <i class="fa fa-exclamation-triangle" uib-tooltip="{{'Quota usage exceeds limit.' | translate}}"
                        ng-if="$ctrl.exceeds(choice.quotas.ram) && choice.selected" ></i>
                        {{ $ctrl.getUsageSummary(choice.quotas.ram) }}
                    </p>
                    <uib-progress max="choice.quotas.ram.limit">
                      <uib-bar value="choice.quotas.ram.usage" type="warning"/>
                    </uib-progress>
                </td>
                <td ng-class="{'has-error': (quotaForm.vcpu.$error.min || quotaForm.vcpu.$error.required) && choice.selected }">
                    <input class="form-control" id="{{ 'quotas-vcpu-' + $index }}" type="number" name="vcpu"
                     ng-model="choice.quotas.vcpu.limit"
                     ng-min="1"
                     ng-disabled="!choice.selected"
                     ng-required="choice.selected"
                     ng-change="choice.dirty = true">
                    <p>
                        <i class="fa fa-exclamation-triangle" uib-tooltip="{{'Quota usage exceeds limit.' | translate}}"
                        ng-if="$ctrl.exceeds(choice.quotas.vcpu) && choice.selected"></i>
                        {{ $ctrl.getUsageSummary(choice.quotas.vcpu) }}
                    </p>
                    <uib-progress max="choice.quotas.vcpu.limit">
                      <uib-bar value="choice.quotas.vcpu.usage" type="warning"/>
                    </uib-progress>
                </td>
                <td ng-class="{'has-error': (quotaForm.storage.$error.min || quotaForm.storage.$error.required) && choice.selected }">
                    <input class="form-control" id="{{ 'quotas-storage-' + $index }}" type="number" name="storage"
                     ng-model="choice.quotas.storage.limit"
                     multiply-by="$ctrl.multiplyFactor"
                     ng-min="1"
                     ng-disabled="!choice.selected"
                     ng-required="choice.selected"
                     ng-change="choice.dirty = true">
                    <p>
                        <i class="fa fa-exclamation-triangle" uib-tooltip="{{'Quota usage exceeds limit.' | translate}}"
                           ng-if="$ctrl.exceeds(choice.quotas.storage)  && choice.selected"></i>
                        {{ $ctrl.getUsageSummary(choice.quotas.storage) }}
                    </p>
                    <uib-progress max="choice.quotas.storage.limit">
                      <uib-bar value="choice.quotas.storage.usage" type="warning"/>
                    </uib-progress>
                </td>
            </tr>
        </tbody>
    </table>
</div>
