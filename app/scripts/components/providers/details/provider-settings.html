<div class="success-message" ng-if="getClass() == 'processing'">
    Please wait while provider is being configured.
</div>

<div ng-if="service.state == 'Erred'" class="error-message">
    {{ ::service.error_message || defaultErrorMessage }}
</div>

<div ng-if="loading">
  <h1 class="text-center"><i class="icon fa-spinner fa-spin"></i></h1>
</div>

<div ng-if="!service.editable && !service.nameEditable" class="empty-list-message">
    Settings are not editable.
</div>

<div class="form-horizontal" ng-if="!loading">
    <div class="form-group" ng-if="::service.nameEditable">
        <label class="col-sm-3 control-label" for="serviceName">
            Name:
        </label>
        <div class="col-sm-9">
            <p class="form-control-static">
                <span editable-text="service.name"
                      id="serviceName"
                      e-form="rowform"
                      buttons="no"
                      onbeforesave="updateServiceName($data)">
                      {{ service.name }}
                </span>
                <i class="fa fa-pencil-square-o"
                   ng-click="rowform.$show()"
                   ng-hide="rowform.$visible"></i>
            </p>
        </div>
    </div>
    <div class="form-group" ng-repeat="field in service.fields" ng-if="::service.editable">
        <label class="col-sm-3 control-label" for="{{ ::service.uuid }}_{{ ::field.name }}">
            <helpicon help-text="{{ ::field.help_text }}" ng-if="::field.help_text"></helpicon>
            {{ ::field.label }}
        </label>
        <div class="col-sm-9">
          <div ng-if="field.secret" class="has-password">
              <input class="form-control" id="{{ ::service.uuid }}_{{ ::field.name }}"
                     type="{{showSecret ? 'text' : 'password'}}"
                     ng-model="service.values[field.name]">
              <a class="icon password-icon"
                 ng-class="{'fa-eye-slash': showSecret, 'fa-eye': !showSecret}"
                 title="{{showSecret ? 'Hide' : 'Show'}}"
                 ng-click="showSecret=!showSecret">
              </a>
          </div>
          <div ng-if="!field.secret" ng-switch="::field.type">
              <input id="{{ ::service.uuid }}_{{ ::field.name }}"
                     type="text"
                     class="form-control"
                     ng-switch-when="string"
                     ng-model="service.values[field.name]">

              <input id="{{ ::service.uuid }}_{{ ::field.name }}"
                     type="text"
                     ng-switch-when="url"
                     class="form-control"
                     ng-model="service.values[field.name]">

              <input id="{{ ::service.uuid }}_{{ ::field.name }}"
                     type="checkbox"
                     ng-switch-when="boolean"
                     ng-model="service.values[field.name]"/>

              <select id="{{ ::service.uuid }}_{{ ::field.name }}"
                      ng-switch-when="choice"
                      ng-model="service.values[field.name]"
                      class="form-control"
                      ng-options="item.value as item.display_name for item in field.choices">
              </select>

              <div ng-switch-when="file upload">
                {{ getFilename(service.values[field.name]) || 'None'}}
                <a class="btn btn-default"
                   ngf-select
                   ngf-accept="'application/x-x509-ca-cert'"
                   ng-model="service.values[field.name]">Browse</a>
              </div>
          </div>
        </div>
    </div>
    <div class="decision" ng-show="hasChanged(service)">
        <div class="col">
            <a class="btn btn-primary" ng-click="updateSettings(service)" ng-class="{'disabled': isDisabled(service)}">Save</a>
        </div>
    </div>
</div>
