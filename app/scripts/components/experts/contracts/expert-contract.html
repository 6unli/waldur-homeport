<div ng-if="$ctrl.loading">
  <loading-spinner></loading-spinner>
</div>
<div ng-if="!$ctrl.loading">
  <div class="row">
    <div class="ibox float-e-margins">
      <div class="ibox-title">
        <h5>
          <span translate>Details</span>
          <billing-type ng-if="$ctrl.model.hasOwnProperty('recurring_billing')" model="$ctrl.model"/>
        </h5>
        <div class="ibox-tools" ng-init="collapsed = false">
          <a class="collapse-link" ng-click="collapsed = !collapsed">
            <i class='fa' ng-class="collapsed ? 'fa-chevron-up' : 'fa-chevron-down'"></i>
          </a>
        </div>
      </div>
      <div class="ibox-content" ng-hide="collapsed">
        <expert-contract-section ng-if="!$ctrl.model.state"
          config="$ctrl.offeringConfig"
          model="$ctrl.model"/>
        <expert-request-general-info ng-if="$ctrl.model.state" expert-request="$ctrl.model"/>
      </div>
    </div>
  </div>
  <div class="row" ng-repeat="tab in $ctrl.contractTemplate.order">
    <div class="ibox float-e-margins">
      <div class="ibox-title">
        <h5>{{$ctrl.contractTemplate.options[tab].label}}</h5>
        <div class="ibox-tools" ng-init="collapsed = false">
          <a class="collapse-link" ng-click="collapsed = !collapsed">
            <i class='fa' ng-class="collapsed ? 'fa-chevron-up' : 'fa-chevron-down'"></i>
          </a>
        </div>
      </div>
      <div class="ibox-content" ng-hide="collapsed">
        <expert-contract-section config="$ctrl.contractTemplate.options[tab]" model="$ctrl.model"/>
      </div>
    </div>
  </div>
</div>
