<div class="modal-header">
    <h3 class="modal-title">
        {{ HookController.instance.uuid && 'Update' || 'Create' }} notification
    </h3>
</div>

<div class="modal-body">
    <div class="form-group" ng-if="HookController.loading">
        <h1 class="text-center"><i class="icon fa-spinner fa-spin"></i></h1>
    </div>

    <div ng-if="!HookController.loading">
        <p class="form-control-static" ng-if="HookController.instance.uuid">
            <strong>Notification method:</strong>
            {{ HookController.instance.hook_type|titleCase }}
        </p>

        <div class="form-group" ng-if="!HookController.instance.uuid">
            <div class="btn-group">
                <button class="btn btn-default"
                    ng-class="{active: HookController.instance.hook_type == type}"
                    ng-repeat="type in HookController.types"
                    ng-click="HookController.instance.hook_type = type">
                    <i class="fa" ng-class="{
                        'fa-envelope-o': type == 'email',
                        'fa-link': type == 'webhook'
                    }"></i>
                    {{ type|titleCase }}
                </button>
            </div>
        </div>

        <div class="checkbox" ng-if="HookController.instance.uuid">
            <label>
                <input type="checkbox" ng-model="HookController.instance.is_active">
                Enabled
            </label>
        </div>

        <div class="form-group" ng-if="HookController.instance.hook_type == 'email'">
            <input type="email"
                id="hookEmail"
                ng-model="HookController.instance.email"
                class="form-control"
                placeholder="E-mail address"/>
            <p class="text-danger"
                ng-repeat="error in HookController.errors.email"
                ng-bind="error"></p>
        </div>

        <div class="form-group" ng-if="HookController.instance.hook_type == 'webhook'">
            <input type="url"
                id="destination_url"
                ng-model="HookController.instance.destination_url"
                class="form-control"
                placeholder="Destination URL"/>
            <p class="text-danger"
                ng-repeat="error in HookController.errors.destination_url"
                ng-bind="error"></p>
        </div>

        <div class="form-group">
            <label class="control-label">Event types</label>
            <div multiple-select choices="HookController.choices"></div>
            <p class="text-danger"
                ng-repeat="error in HookController.errors.event_groups"
                ng-bind="error"></p>
        </div>

        <p class="text-danger"
            ng-repeat="error in HookController.errors.non_field_errors"
            ng-bind="error"></p>
    </div>
</div>

<div class="modal-footer">
    <button class="btn btn-primary"
        submit-button="HookController.save()">
        {{ HookController.instance.uuid && 'Update' || 'Create' }}
    </button>
    <button class="btn btn-default"
        ng-click="HookController.$dismiss()">
        Cancel
    </button>
</div>
