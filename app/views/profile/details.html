<div ng-controller="ProfileController as DetailsProfile">

    <div class="profile-view">
        <section class="avatar">
            <span class="avatar big">
                <img gravatar-src="DetailsProfile.user.email" alt="" class="avatar-img">
            </span>
        </section>
        <section class="content">
            <h2 class="app-title">{{ DetailsProfile.user.full_name }}</h2>
            <span>({{ DetailsProfile.user.username }})</span>
            <div>
                <a href="mailto:{{ DetailsProfile.user.email }}">{{ DetailsProfile.user.email }}</a>
            </div>
        </section>
        <section class="actions">
            <div class="actions-button">
                <a class="button" ng-click="openActions=!openActions">actions</a>
                <ul class="actions-dropdown" ng-show="openActions">
                    <li>
                        <!-- TODO set href to new manage-user view. -->
                        <a class="button-simple">Add to project</a>
                    </li>
                    <li>
                        <a ui-sref="profile.update" class="button-simple">Edit profile</a>
                    </li>
                    <li>
                        <a class="button-simple button-delete" ng-click="DetailsProfile.deleteAccount()">Delete my account</a>
                    </li>
                </ul>
            </div>
        </section>
    </div>

    <ul class="tabs-nav">
        <li ng-class="{'active': DetailsProfile.activeTab === 'eventlog'}"
            ng-click="DetailsProfile.activeTab = 'eventlog'">
            Events
        </li>
        <li ng-class="{'active': DetailsProfile.activeTab === 'projects'}"
            ng-click="DetailsProfile.activeTab = 'projects'">
            Projects
        </li>
        <li ng-class="{'active': DetailsProfile.activeTab === 'keys'}"
            ng-click="DetailsProfile.activeTab = 'keys'">
            SSH Keys
        </li>
        <li ng-class="{'active': DetailsProfile.activeTab === 'manageuser'}"
            ng-click="DetailsProfile.activeTab = 'manageuser'">
            Manage User
        </li>
    </ul>

    <sectin class="tabs-content" ng-switch="DetailsProfile.activeTab">
        <div class="tab" id="eventlog"
            ng-class="{'tab-active': DetailsProfile.activeTab === 'eventlog'}"
            ng-switch-when="eventlog">
            <div ui-view="tabEventlog"></div>
        </div>
        <div class="tab" id="projects"
            ng-class="{'tab-active': DetailsProfile.activeTab === 'projects'}"
            ng-switch-when="projects">
            <div ui-view="tabProjects"></div>
        </div>
        <div class="tab" id="keys"
            ng-class="{'tab-active': DetailsProfile.activeTab === 'keys'}"
            ng-switch-when="keys">
            <div ui-view="tabKeys"></div>
        </div>
        <div class="tab" id="manageuser"
            ng-class="{'tab-active': DetailsProfile.activeTab === 'manageuser'}"
            ng-switch-when="manageuser">
            <div ui-view="tabManageUser"></div>
        </div>
    </sectin>

</div>
