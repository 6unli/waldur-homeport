<div ng-controller="HeaderController as Header">
    <!-- app-header -->
    <header class="app-header">
        <nav class="container">
            <!-- views nav -->
            <ul class="nav-list views">
                <li class="logo-box" ng-class="{'active': Header.menuItemActive === 'dashboard'}">
                    <a class="logo" ui-sref="dashboard.index" title="Dashboard"></a>
                </li>
                <li class="mobile-trigger">
                    <a class="mobile-trigger-link icon bars"
                        ng-click="Header.mobileMenu()"></a>
                </li>
                <li visible="customers" class="dropdown customers" ng-class="{'active': Header.menuState.customerMenu}">
                    <a class="customer-context drop-active" ng-click="Header.menuToggle('customerMenu', $event)">
                        <span class="active-context">Organization</span>
                        <span class="customer-name">{{ Header.currentCustomer.name }}</span>
                    </a>
                    <div class="nav-sublist nav-sublist-customers" ng-show="Header.menuState.customerMenu">
                        <div class="manage-item">
                            <a ng-click="Header.goToCurrentOrganization()">
                                <i class="icon zoom"></i>
                                Details
                            </a>
                        </div>
                        <ul>
                            <li ng-repeat="customer in Header.customers" ng-if="customer.uuid != Header.currentCustomer.uuid">
                                <a ng-click="Header.goToCustomer(customer)">
                                    <i ng-if="Header.isOwner(customer)" class="icon fa fa-star-o" title="Owner"></i>
                                    {{ customer.name }}
                                </a>
                            </li>
                            <li ng-if="Header.hasMore">
                                <a ui-sref="organizations.list" title="Manage organizations">...</a>
                            </li>
                        </ul>
                        <div class="manage-item bottom">
                            <a ui-sref="organizations.list" class="manage">
                                <i class="icon wrench"></i>
                                Manage organizations
                            </a>
                        </div>
                    </div>
                </li>
                <li visible="projects" class="dropdown project-dropdown" ng-class="{'active': Header.menuState.projectMenu}">
                    <a class="project-context drop-active" ng-click="Header.menuToggle('projectMenu', $event)">
                        <span class="active-context">Project</span>
                        <span class="customer-name">{{ Header.currentProject.name ? Header.currentProject.name : 'No project' }}</span>
                    </a>
                    <div block-ui="project-menu" class="nav-sublist" ng-show="Header.menuState.projectMenu">
                        <ul class="project">
                            <li ng-repeat="project in Header.projects" ng-if="project.uuid != Header.currentProject.uuid">
                                <a ng-click="Header.setCurrentProject(project)">
                                    <span>{{ project.name }}</span>
                                    <span></span>
                                </a>
                            </li>
                        </ul>
                        <div class="manage-item bottom bottom-1">
                            <a ui-sref="organization.projects({uuid: Header.currentCustomer.uuid})" class="manage">
                                <i class="icon wrench"></i>
                                Manage projects
                            </a>
                        </div>
                        <div class="manage-item bottom">
                            <div class="tooltip-relative inline"
                                 check-quotas="{{Header.checkQuotas.projects}}"
                                 sref="project-create"
                                 class-link="manage"
                                 tooltip-type="project-drop-down">
                                <div><i class="icon plus"></i> Add project</div>
                            </div>
                        </div>
                    </div>
                </li>
                <li class="resources">
                    <a class="appstore"
                       ng-click="Header.goToCurrentProject()"
                       ng-class="{'active': Header.menuItemActive === 'projects', 'disabled' : !Header.currentProject.name}">
                        <span><b class="icon zoom"></b>Details</span>
                    </a>
                </li>
                <li visible="appstore" class="appstore">
                    <div check-quotas="{{Header.checkQuotas.resources}}"
                         sref="appstore.store"
                         ng-class="{'disabled' : !Header.currentProject.name}"
                         class-link="appstore {{ Header.menuItemActive === 'appstore' ? 'active' : '' }}"
                         tooltip-type="head-nav-appstore">
                        <span><b class="icon cart-plus"></b>Appstore</span>
                    </div>
                </li>
            </ul>
            <!-- /views nav -->
            <!-- context nav -->
            <ul class="nav-list context">
                <li class="dropdown user-dropdown" ng-class="{'active': Header.menuState.profileMenu || Header.menuItemActive == 'users'}">
                    <a class="user-area drop-active" ng-click="Header.menuToggle('profileMenu', $event)">
                        <span class="avatar">
                            <img gravatar-src="Header.currentUser.email" gravatar-size="100">
                        </span>
                        <span class="user-name">{{ Header.currentUser.full_name || Header.currentUser.username }}</span>
                    </a>
                    <div class="nav-sublist user-area" ng-show="Header.menuState.profileMenu">
                        <ul>
                            <li visible="services" class="on-tablet">
                                <div class="tooltip-relative"
                                     check-quotas="{{Header.checkQuotas.resources}}"
                                     sref="services.create"
                                     class-link="service"
                                     tooltip-type="user-drop-down">
                                    <div translate>Add provider</divtranslate>
                                </div>
                            </li>
                            <li visible="projects" class="on-tablet">
                                <div class="tooltip-relative"
                                     check-quotas="{{Header.checkQuotas.projects}}"
                                     sref="project-create"
                                     class-link="project"
                                     tooltip-type="user-drop-down">
                                    <div><i class="icon plus"></i> Add project</div>
                                </div>
                            </li>
                            <li visible="import" ng-if="::Header.showImport" class="on-tablet">
                                <div class="tooltip-relative"
                                     check-quotas="{{Header.checkQuotas.resources}}"
                                     sref="import.import"
                                     class-link="import"
                                     tooltip-type="user-drop-down">
                                    <div translate>Import resources</div>
                                </div>
                            </li>
                            <li visible="support" class="on-tablet">
                                <a ui-sref="support.list" translate>Support</a>
                            </li>
                            <li>
                                <a ui-sref="profile.details" translate>Profile</a>
                            </li>
                            <li>
                                <a ng-click="logout()" translate>Logout</a>
                            </li>
                        </ul>
                    </div>
                </li>
                <li visible="support" class="customer-support">
                    <a ui-sref="support.list" class="support" title="Support"
                       ng-class="{'active': Header.menuItemActive === 'support'}"></a>
                </li>
                <li class="dropdown" ng-show="Header.LANGUAGE_CHOICES.length>1" ng-click="Header.menuToggle('langMenu', $event)">
                    <a class="lang" title="{{ Header.currentLanguage.label }}">{{ Header.currentLanguage.code | uppercase }}</a>
                    <div class="nav-sublist lang" ng-show="Header.menuState.langMenu">
                        <ul>
                            <li ng-repeat="language in Header.LANGUAGE_CHOICES"
                                ng-click="Header.changeLanguage(language)">
                                <a ng-class="{'current': language.code==Header.currentLanguage.code}">{{ language.label}}</a>
                            </li>
                        </ul>
                    </div>
                </li>
            </ul>
            <!-- /context nav -->
        </nav>
    </header>
    <!-- app-header -->
    <div class="mobile-menu-side" ng-show="Header.showMobileMenu">
        <nav>
            <!-- views nav -->
            <ul class="nav-list-side">
                <li>
                    <a ui-sref="dashboard.index"
                        ng-class="{'active': Header.menuItemActive === 'dashboard'}" class="dashboard">
                        <span>Dashboard</span>
                    </a>
                </li>
                <li class="on-tablet customers current">
                    <a ui-sref="organization.details({uuid: Header.currentCustomer.uuid})">
                        <span>Organization</span>
                        <div class="customer-name">{{ Header.currentCustomer.name }}</div>
                    </a>
                </li>
                <li class="on-tablet customers choose-list" stoppropagation
                    ng-click="Header.showOrganizations = !Header.showOrganizations"
                    ng-if="Header.customers.length > 1"
                    ng-class="{'choose-list-active': Header.showOrganizations}">
                    <a>Choose organization</a>
                </li>
                <li class="on-tablet customers choose-list-item"
                    ng-show="Header.showOrganizations && customer.uuid !== Header.currentCustomer.uuid"
                    ng-repeat="customer in Header.customers">
                    <a ng-click="Header.goToCustomer(customer)">{{ customer.name }}</a>
                </li>
                <li class="on-tablet customers choose-list-item"
                    ng-if="Header.showOrganizations && Header.hasMore">
                    <a ui-sref="organizations.list" title="Manage organizations">...</a>
                </li>
                <li class="on-tablet">
                    <a ui-sref="organizations.list" class="manage">
                        <i class="icon wrench"></i>
                        Manage organizations
                    </a>
                </li>
                <li class="on-tablet customers current" ng-if="Header.currentProject.name">
                    <a ui-sref="project.details({uuid: Header.currentProject.uuid})">
                        <span>Project</span>
                        <div class="customer-name">{{ Header.currentProject.name }}</div>
                    </a>
                </li>
                <li class="on-tablet customers choose-list" stoppropagation
                    ng-if="Header.projects.length > 1"
                    ng-click="Header.showProjects = !Header.showProjects"
                    ng-class="{'choose-list-active': Header.showProjects}">
                    <a>Choose project</a>
                </li>
                <li class="on-tablet customers choose-list-item"
                    ng-show="Header.showProjects && project.uuid !== Header.currentProject.uuid"
                    ng-repeat="project in Header.projects">
                    <a ng-click="Header.setCurrentProject(project)">{{ project.name }}</a>
                </li>
                <li class="on-tablet">
                    <a ui-sref="organization.projects({uuid: Header.currentCustomer.uuid})" class="manage">
                        <i class="icon wrench"></i>
                        Manage projects
                    </a>
                </li>
            </ul>
            <!-- /views nav -->
            <!-- context nav -->
            <ul class="nav-list-side">
                <li visible="support">
                    <a ui-sref="support.list"
                        ng-class="{'active': Header.menuItemActive === 'support'}" class="support">Support</a>
                </li>
                <li class="dropdown">
                    <a href="" class="user-area drop-active" ng-click="Header.menuToggle('sideProfileMenu', $event)"
                        ng-class="{'active': Header.menuState.sideProfileMenu}" scroll-to-me container-class="mobile-menu-side">
                        <span class="avatar">
                            <img gravatar-src="Header.currentUser.email" gravatar-size="100">
                        </span>
                        <span class="user-name">{{ Header.currentUser.full_name || Header.currentUser.username }}</span>
                    </a>
                    <ul class="nav-sublist-side user-area" ng-show="Header.menuState.sideProfileMenu">
                        <li>
                            <a ui-sref="profile.details">Profile</a>
                        </li>
                        <li>
                            <a ng-click="logout()">Logout</a>
                        </li>
                    </ul>
                </li>
            </ul>
            <!-- /context nav -->
        </nav>
    </div>
</div>
