<div>
    <section class="title-wrapper">
        <div class="container details-container">
            <div class="left-side">
                <h1 ng-if="options.title ">{{ options.title }}</h1>
                <a ng-if="options.listState" ui-sref="{{ options.listState }}"
                   class="back-to-list button">Back to list</a>
            </div>

            <div ng-if="options.hasGravatar" class="img-wrapper">
                <img gravatar-src="controller.model.email" class="avatar-img" gravatar-size="100">
            </div>
            <div class="details-about">

                <div ng-if="options.hasLogo" class="profile-logo">
                    <section class="avatar">
                        <span class="avatar big">
                            <img ng-src="{{controller.imageUrl}}" alt="" class="avatar-img"
                                 ng-hide="controller.files.length">

                            <img ngf-src="controller.files[0]" alt="" class="avatar-img"
                                 ng-show="controller.files.length">
                        </span>
                    </section>
                    <section class="avatar-edit" ng-show="controller.canEdit">
                        <a class="icon-button plus-icon" ngf-select ngf-accept="'image/*'"
                           ng-hide="controller.files.length"
                           ng-model="controller.files">New logo</a>

                        <a class="icon-button remove-icon"
                           ng-show="controller.model.image && controller.files.length==0"
                           ng-click="controller.deleteImage()">Delete</a>

                        <a class="icon-button ok-icon"
                           ng-show="controller.files.length"
                           ng-click="controller.uploadImage()">Save</a>

                        <a class="icon-button remove-icon"
                           ng-show="controller.files.length"
                           ng-click="controller.files=[]">Cancel</a>
                    </section>
                </div>

                <div ng-repeat="field in options.aboutFields">
                    <div>
                        <span class="{{ field.className }}"
                              ng-if="!field.isEditable || !controller.canEdit">{{ controller.model[field.fieldKey] }}</span>
                        <span editable-text="controller.model[field.fieldKey]"
                              e-form="rowform"
                              buttons="no"
                              onbeforesave="controller.editInPlace($data, field.fieldKey)"
                              ng-show="field.isEditable && controller.canEdit"
                              class="{{ field.className }}">
                            {{ controller.model[field.fieldKey] || field.emptyText }}
                        </span>
                        <div class="icon pencil-square-o"
                             ng-if="field.isEditable && controller.canEdit"
                             ng-click="rowform.$show()"
                             ng-hide="rowform.$visible"></div>
                        <div class="clear"></div>
                    </div>
                </div>
                <p ng-if="options.joinedDate">
                    Joined on {{ controller.model[options.joinedDate] | date:'dd MMMM yyyy' }}
                </p>
            </div>
        </div>
        <customer-balance ng-if="controller.detailsViewOptions.title == 'Organization'"
                          customer-balance-type="details"
                          customer-add-credit="controller.addCredit"
                          customer-chart-data="controller.chartData"
                          customer-show-chart="controller.showChart"></customer-balance>
        <div class="clear"></div>
    </section>
    <div class="profile-content">
        <div class="container">
            <div class="tabs-wrapper">
                <aside>
                    <div class="input-group rem-mob">
                        <input type="search" placeholder="Search"
                               ng-model="generalSearch"
                               ng-model-options="{ debounce: 500 }"
                               ng-change="search()"/>
                    </div>
                    <ul class="tabs-links tabs-opened" ng-class="{'tabs-opened': openTabs}">
                        <li visible="{{ tab.key }}" ng-class="{'active': options.activeTab === tab.key}"
                            ng-click="tabChange(tab.key)"
                            ng-repeat="tab in options.tabs">
                            {{ tab.title }} <span ng-if="tab.key != 'delete'"><span ng-show="tab.count !== -1">({{ tab.count }})</span></span>
                        </li>
                    </ul>
                </aside>
                <div class="tab-content" block-ui="tab-content">
                    <div visible="{{ tabContent.key }}" class="tab" id="{{ tabContent.key }}"
                         ng-class="{'tab-active': options.activeTab === tabContent.key}"
                         ng-if="tabContent.key == options.activeTab"
                         ng-repeat="tabContent in options.tabs">
                        <div ui-view="{{ tabContent.viewName }}"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>