<section block-ui="comments_{{ ::expandableElement.uuid }}">

    <header>
        <section class="support-description" ng-if="expandableOptions.headBlock == 'description'">
            <article class="normal-description">{{ expandableElement.description }}</article>
        </section>
    </header>

    <ul class="list-blocks-support">
        <li class="item-list" ng-repeat="element in pageModels[modelId].data">
            <section ng-if="expandableOptions.answersBlock">
                <div class="list-item">
                    <div class="avatar">
                        <span class="avatar">
                            <img gravatar-src="element.user_email" gravatar-size="100" alt="" class="avatar-img">
                        </span>
                    </div>
                    <div class="support name">
                        <span class="subtitle">
                            <strong>{{ element.user_name }}</strong>
                            <span title="{{ ::element.created | date:'medium' }}" am-time-ago="element.created"></span>
                        </span>
                    </div>
                    <article class="normal-description">{{ element.message }}</article>
                </div>
            </section>
        </li>
    </ul>

    <minipagination
            page-models="expandableList[expandableOptions.listKey]"
            page-model-id="expandableElement[expandableOptions.modelId]"
            page-change="expandableOptions.minipaginationData.pageChange"
            page-entity-name="{{ expandableOptions.minipaginationData.pageEntityName }}">
    </minipagination>

    <section ng-if="expandableOptions.hasAnswerForm" class="section-feedback">
        <div class="comment-form">
            <label for="message">Leave message</label>
            <textarea class="form-control" id="message" cols="30" rows="10" ng-model="expandableElement.newCommentBody"></textarea>
            <div class="decision">
                <div class="col">
                    <a class="button-apply" ng-click="expandableList.addComment(expandableElement)"
                       ng-class="{'disabled': expandableElement.newCommentSaving || !expandableElement.newCommentBody}">Submit message</a>
                </div>
            </div>
        </div>
    </section>

</section>
