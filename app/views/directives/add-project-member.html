<div class="modal-header">
    <h3 class="modal-title">{{ addTitle }} project member</h3>
</div>
<div class="modal-body">
    <div ng-if="loading">
        <h1 class="text-center"><i class="icon fa-spinner fa-spin"></i></h1>
    </div>
    <div ng-if="!loading" block-ui="add-team-member-dialog">
        <div class="form-group" ng-if="!editUser && users.length">
            <label class="control-label">User:</label>
            <ui-select ng-model="projectModel.user" ng-required="projectModel.user" theme="bootstrap">
                <ui-select-match placeholder="Select user...">
                    {{ $select.selected.full_name || $select.selected.username }}
                </ui-select-match>
                <ui-select-choices repeat="user in users | filter: $select.search track by user.uuid">
                    <div>{{ ::user.full_name }}</div>
                    <small>
                        <div ng-if="::user.username">
                            Username: {{ ::user.username }}
                        </div>
                        <div ng-if="::user.email">
                            E-mail: {{ ::user.email }}
                        </div>
                        <div ng-if="::user.civil_number">
                            Civil number: {{ ::user.civil_number }}
                        </div>
                    </small>
                </ui-select-choices>
            </ui-select>
        </div>

        <p ng-if="!editUser && !users.length" class="text-danger">
            There are no available users.
        </p>

        <div class="form-group" ng-if="editUser">
            <p class="form-control-static">
                <strong>User:</strong>
                {{ editUser.full_name || editUser.username }}
            </p>
        </div>

        <div class="form-group">
            <div>
                Role: <span ng-if="isProjectAdmin">as {{::possibleRoles[0].name}}</span>
            </div>
            <div></div>
            <div ng-if="!isProjectAdmin">
                <label>
                    <input name="role"
                           type="radio"
                           ng-model="projectModel.role"
                           ng-value="'manager'"
                           value="possibleRoles[1].value">
                    {{possibleRoles[1].name}}
                </label>
            </div>
            <div ng-if="!isProjectAdmin">
                <label>
                    <input name="role"
                           type="radio"
                           ng-model="projectModel.role"
                           ng-value="'admin'"
                           value="possibleRoles[0].value">
                    {{possibleRoles[0].name}}
                </label>
            </div>
        </div>

        <div class="error" ng-repeat="error in errors" ng-bind="error"></div>
    </div>
</div>
<div class="modal-footer">
    <button class="btn btn-primary"
            submit-button="saveUser()"
            ng-class="{'disabled': canSubmit()}">
        {{ addText }}
    </button>
    <button class="btn btn-default"
            ng-click="$dismiss()">
        Cancel
    </button>
</div>
