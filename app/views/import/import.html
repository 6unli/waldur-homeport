<div ng-controller="ImportResourceController as ImportResource">

    <div class="container">
        <h1>Import resources from provider</h1>
    </div>

    <div class="white-box no-styles" ng-show="ImportResource.services.length == 0">
        <h2 class="app-title">
            You don't have any provider yet.
        </h2>
        <div class="decision">
            <div class="col">
                <a ui-sref="services.create" class="button">Create new provider</a>
            </div>
        </div>
    </div>

    <div class="white-box" ng-show="ImportResource.services.length>0">
        <div class="short-form full">
            <div class="form-row">
                <div class="col full">
                    <h3 class="app-title">Select provider</h3>
                    <!-- Select service -->
                    <div class="appstore-templates">
                        <!-- service -->
                        <div ng-repeat="service in ImportResource.services"
                             ng-class="{'state': ImportResource.selectedService == service}"
                             ng-click="ImportResource.setService(service)"
                             class="appstore-template">
                            <div class="icon">
                                <img ng-src="{{ service.icon }}" alt="" class="icon">
                            </div>
                            <div class="description">
                                <h3>{{ service.name }}</h3>
                            </div>
                        </div>
                    </div>
                    <!-- /Select service -->
                </div>
                <a class="toggle-link pull-right"
                   ng-show="ImportResource.importedResources.length"
                   ng-click="showImportedResources=!showImportedResources"
                   ng-class="{'active': showImportedResources}">
                   Show imported resources ({{ ImportResource.importedResources.length }})
                </a>
                <div class="col full" ng-show="showImportedResources && ImportResource.importedResources.length">
                    <ul class="object-list">
                        <li ng-repeat="resource in ImportResource.importedResources">
                            <div class="list-item">
                                <div class="name">
                                    <h3 class="item-title">
                                        <a>{{ resource.name }}</a>
                                    </h3>
                                </div>
                                <div class="additional-cell">
                                    CPU: {{ resource.cores }}  /
                                    RAM: {{ resource.ram }} MB /
                                    HDD: {{ resource.disk / 1024 }} GB
                                </div>
                                <div class="additional-cell">
                                    <span class="status">Imported to <a ui-sref="projects.details({uuid: resource.project_uuid})">{{ resource.project_name }}</a></span>
                                </div>
                            </div>
                        </li>
                    </ul>
                </div>
                <div class="col full" ng-show="ImportResource.noResources">
                    <h2 class="app-title centered">
                        There are no resources available for import in this provider.
                    </h2>
                </div>
                <div class="col full" ng-show="ImportResource.importableResources.length">
                    <h3 class="app-title">Resources</h3>
                    <ul class="object-list">
                        <li ng-click="ImportResource.toggleResource(resource)"
                            ng-repeat="resource in ImportResource.importableResources">
                            <div class="list-item pointer">
                                <div class="checkbox" ng-switch="resource.status">
                                    <input type="checkbox" ng-checked="resource.checked" ng-click="ImportResource.toggleResource(resource)" ng-switch-when="ready">
                                    <input type="checkbox" disabled ng-switch-when="success">
                                    <input type="checkbox" disabled ng-switch-when="progress">
                                </div>
                                <div class="name">
                                    <h3 class="item-title">
                                        <a>{{ resource.name }}</a>
                                    </h3>
                                </div>
                                <div class="additional-cell">
                                    CPU: {{ resource.cores }}  /
                                    RAM: {{ resource.ram }} MB /
                                    HDD: {{ resource.disk / 1024 }} GB
                                </div>
                                <div class="additional-cell" ng-switch="resource.status">
                                    <span class="status online" ng-switch-when="ready">Available for import</span>
                                    <span class="status" ng-switch-when="progress">In progress</span>
                                    <span class="status online" ng-switch-when="success">
                                        Imported to <a ui-sref="projects.details({uuid: ImportResource.selectedProject.uuid})">
                                            {{ ImportResource.selectedProject.name }}
                                        </a>
                                    </span>
                                    <span class="status offline" ng-switch-when="failed">Failed</span>
                                </div>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="decision" ng-show="ImportResource.importableResources.length">
            <div class="col select-project">
                <article class="descriptoin-light">
                    Selected resources will be imported into
                </article>
                <div class="custom-select project inline-elem">
                    <select ng-model="ImportResource.selectedProject"
                        ng-options="project as project.project_name for project in ImportResource.projectList">
                        <option value="">Choose project</option>
                    </select>
                </div>
            </div>
        </div>

        <div class="decision" ng-show="ImportResource.importableResources.length">
            <div class="col">
                <a class="button-apply"
                   ng-class="{'disabled': !ImportResource.canImport()}"
                   ng-click="ImportResource.save()">Import</a>
            </div>
        </div>

    </div>

</div>
