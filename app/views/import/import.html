<div ng-controller="ImportResourceController as ImportResource">

    <div class="white-box">
        <ul class="sort-list">
            <li class="title">
                <h2 class="app-title">Import resources from service</h2>
            </li>
        </ul>
    </div>

    <div class="white-box no-styles" ng-show="ImportResource.services.length == 0">
        <h2 class="app-title">
            You don't have any services yet.
        </h2>
        <div class="decision">
            <div class="col">
                <a ui-sref="services.create" class="button">Create new service</a>
            </div>
        </div>
    </div>

    <div class="white-box" ng-show="ImportResource.services.length>0">
        <div class="short-form full">
            <div class="form-row">
                <div class="col full">
                    <h3 class="app-title">Select Service</h3>
                    <!-- Select service -->
                    <div class="appstore-templates">
                        <!-- service -->
                        <div ng-repeat="service in ImportResource.services"
                             ng-class="{'state': ImportResource.selectedService == service}"
                             ng-click="ImportResource.setService(service)"
                             class="appstore-template">
                            <div class="icon">
                                <img ng-src="{{ service.icon }}" alt="" class="icon">
                            </div>
                            <div class="description">
                                <h3>{{ service.name }}</h3>
                            </div>
                        </div>
                    </div>
                    <!-- /Select service -->
                </div>
                <div class="col full" ng-show="ImportResource.noResources">
                    <h2 class="app-title">
                        There are no resources available for import in this service.
                    </h2>
                </div>
                <div class="col full" ng-show="ImportResource.resources.length">
                    <h3 class="app-title">Select resources</h3>
                    <ul class="object-list">
                        <li ng-click="ImportResource.toggleResource(resource)"
                            ng-repeat="resource in ImportResource.resources">
                            <div class="list-item pointer">
                                <div class="checkbox" stoppropagation>
                                    <input type="checkbox" ng-checked="resource.checked" ng-click="ImportResource.toggleResource(resource)">
                                </div>
                                <div class="name">
                                    <h3 class="item-title">
                                        <a>{{ resource.name }}</a>
                                    </h3>
                                    <article class="descriptoin-light">
                                        OS: {{ resource.kernel }} /
                                        CPU: {{ resource.cores }}  /
                                        RAM: {{ resource.ram }} MB /
                                        HDD: {{ resource.disk / 1024 }} GB
                                    </article>
                                </div>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="decision" ng-show="ImportResource.resources.length">
            <div class="col select-project">
                <article class="descriptoin-light">
                    Selected resources will be imported into
                </article>
                <div class="custom-select project inline-elem">
                    <select ng-model="ImportResource.selectedProject"
                        ng-options="project as project.project_name for project in ImportResource.projectList">
                        <option value="">Choose project</option>
                    </select>
                </div>
            </div>
        </div>

        <div class="decision" ng-show="ImportResource.resources.length">
            <div class="col">
                <a class="button-apply"
                   ng-class="{'disabled': !ImportResource.canImport()}"
                   ng-click="ImportResource.save()">Import</a>
            </div>
        </div>

    </div>

</div>
