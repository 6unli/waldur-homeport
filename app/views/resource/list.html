<div ng-controller="ProjectStatsController">
    <div class="container">
        <h1>Resources</h1>
    </div>
    <section class="resources-content">
        <div class="container">
            <div class="tabs-wrapper">
                <aside>
                    <div class="input-group">
                        <input type="search" placeholder="Search" ng-model="searchText" ng-change="search()"/>
                    </div>
                    <ul class="tabs-links" ng-init="activeTab='VMs'">
                        <li ng-click="activeTab='VMs'"
                            ng-class="{'active': activeTab=='VMs'}">VMs <span ng-if="count">(<span ng-bind="count.vms"></span>)</span></li>

                        <li ng-click="activeTab='Applications'"
                            ng-class="{'active': activeTab=='Applications'}">Applications <span ng-if="count">(<span ng-bind="count.apps"></span>)</span></li>

                        <li ng-click="activeTab='Backups'"
                            ng-class="{'active': activeTab=='Backups'}">Backups <span ng-if="count">(<span ng-bind="count.backups"></span>)</span></li>

                        <li ng-click="activeTab='People'"
                            ng-class="{'active': activeTab=='People'}">People <span ng-if="count">(<span ng-bind="count.users"></span>)</span></li>

                        <li ng-click="activeTab='Providers'"
                            ng-class="{'active': activeTab=='Providers'}">Providers <span ng-if="count">(<span ng-bind="count.services"></span>)</span></li>
                    </ul>
                </aside>
                <div class="tab-content" ng-switch="activeTab">
                    <div ng-switch-when="VMs"
                         ng-controller="ProjectResourcesTabController as ResourceList">
                         <entitylist entity-list="ResourceList"
                                     entity-service="ResourceList.service"
                                     entity-buttons="ResourceList.actionButtonsListItems"
                                     entity-options="ResourceList.entityOptions"></entitylist>
                    </div>

                    <div ng-switch-when="Applications"
                         ng-controller="ProjectApplicationsTabController as ResourceList">
                         <entitylist entity-list="ResourceList"
                                     entity-service="ResourceList.service"
                                     entity-buttons="ResourceList.actionButtonsListItems"
                                     entity-options="ResourceList.entityOptions"></entitylist>
                    </div>

                    <div ng-switch-when="Backups"
                         ng-controller="ProjectBackupsTabController as ResourceList">
                         <entitylist entity-list="ResourceList"
                                     entity-service="ResourceList.service"
                                     entity-buttons="ResourceList.actionButtonsListItems"
                                     entity-options="ResourceList.entityOptions"></entitylist>
                    </div>

                    <div ng-switch-when="People"
                         ng-controller="ProjectUsersTabController2 as ProjectUsersTab">
                        <div class="white-box">
                            <div class="row">
                                <div class="col full">
                                    <div class="add-or-remove">
                                        <h3 class="app-title">Administrator</h3>
                                         <span class="added" ng-repeat="adminUser in ProjectUsersTab.users[ProjectUsersTab.adminRole]"
                                          ng-click="ProjectUsersTab.userProjectRemove(adminUser)">
                                        {{ adminUser.user_full_name }}
                                         </span>
                                        <angucomplete-alt id="{{ ProjectUsersTab.adminRole }}"
                                                          ng-click="inputMode=!inputMode"
                                                          placeholder="Add"
                                                          pause="100"
                                                          type="text"
                                                          selected-object="ProjectUsersTab.selectedUsersCallback"
                                                          local-data="ProjectUsersTab.usersListForAutoComplete"
                                                          search-fields="full_name"
                                                          title-field="full_name"
                                                          description-field="email"
                                                          minlength="1"
                                                          clear-selected="true"
                                                          input-changed="ProjectUsersTab.userSearchInputChanged"
                                                          input-class="add-label {{ inputMode ? 'input': '' }}"></angucomplete-alt>
                                    </div>
                                </div>
                                <div class="col full">
                                    <div class="add-or-remove">
                                        <h3 class="app-title">Managers</h3>
                                        <span class="added" ng-repeat="managerUser in ProjectUsersTab.users[ProjectUsersTab.managerRole]"
                                          ng-click="ProjectUsersTab.userProjectRemove(managerUser)">
                                        {{ managerUser.user_full_name }}
                                           </span>
                                        <angucomplete-alt id="{{ ProjectUsersTab.managerRole }}"
                                                          ng-click="inputMode2=!inputMode2"
                                                          placeholder="Add"
                                                          pause="100"
                                                          type="text"
                                                          selected-object="ProjectUsersTab.selectedUsersCallback"
                                                          local-data="ProjectUsersTab.usersListForAutoComplete"
                                                          search-fields="full_name"
                                                          title-field="full_name"
                                                          description-field="email"
                                                          minlength="1"
                                                          clear-selected="true"
                                                          input-changed="ProjectUsersTab.userSearchInputChanged"
                                                          input-class="add-label {{ inputMode2 ? 'input': '' }}"></angucomplete-alt>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div ng-switch-when="Providers"
                         ng-controller="ProjectServicesTabController as ResourceList">
                         <entitylist entity-list="ResourceList"
                                     entity-service="ResourceList.service"
                                     entity-buttons="ResourceList.actionButtonsListItems"
                                     entity-options="ResourceList.entityOptions"></entitylist>
                    </div>
                </div>
            </div>
            <div class="clear"></div>
        </div>
    </section>
</div>