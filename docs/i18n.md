# Multilingual user interface

Workflow looks as following:

1. Markup HTML using `translate` directive. For example:
 `<h1 translate>Hello!</h1>`

1. Markup JS code using `gettext` function. For example:
 `gettext('User details')`

1. Translation template is created automatically via Webpack. It will extract strings from HTML, JS and JSX files and put it in `i18n/template.pot`. Doc: <https://angular-gettext.rocketeer.be/dev-guide/annotate/>

1. Create or edit PO files in i18n directory. You can merge new string from POT to PO using `poedit`.

1. All PO files are automatically converted by Webpack to JSON files at `scripts/i18n/locale-LANGUAGECODE.json`

1. Update momentLocalesPlugin configuration in the webpack.config.dll.js to load locales in the following line `new webpack.ContextReplacementPlugin(/moment[/\\]locale$/, /(en-gb|et|ru|lt|lv)/);`

1. When Waldur HomePort application is bootstrapped from JSON configuration, JSON translation file is loaded by `angular-translate` Angular application via AJAX.

1. Current user locale is stored in auth storage.
